Traceback (most recent call last):
  File "/1910316727/AgentPsyAssessment/llm_assessment/run_graph_mapping_test.py", line 261, in main
    results = run_complete_graph_test(model_name, test_data)
  File "/1910316727/AgentPsyAssessment/llm_assessment/run_graph_mapping_test.py", line 121, in run_complete_graph_test
    print(f"正确映射: {question['evaluation_rubric']['correct_mapping']}")
                       ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^
KeyError: 'correct_mapping'
================================================================================
图形映射测试 - 完整版 (35题)
================================================================================
Loading graph mapping test data from: /1910316727/AgentPsyAssessment/llm_assessment/test_files/agent-graph-mapping-35-complete.json
测试数据加载成功。问题总数: 35
测试维度: Abstract Reasoning, Pattern Recognition, Logical Thinking, Problem Solving

模型: qwen2.5-coder:14b
测试: Agent-Graph-Mapping-35 完整版流体推理评估框架 (带独立指令)
描述: 本文件定义了一套用于评估LLM Agent流体推理能力的测试。每个题目提供一个源图(source_graph)和一个目标图(target_graph)，均以邻接表(adjacency list)的文本格式表示。Agent需要找出两个图之间的同构映射关系。
评分方法: 评估分为两部分：1. **结果评分**: 将Agent给出的最终映射与'correct_mapping'进行比对，完全正确得1分，否则得0分。2. **推理评估**: 由评估者LLM根据Agent的解释，对照'reasoning_analysis'标尺评估其推理过程的质量。

即将开始35道题的完整图形映射测试...
预计总时间: 1-2小时
测试过程中不会中断，请耐心等待...

================================================================================
问题 1/35: AGENT_GM_1
维度: Abstract Reasoning
难度: Trivial
源图: {'S1': ['S2'], 'S2': ['S1']}
目标图: {'T_A': ['T_B'], 'T_B': ['T_A']}
提示: 下面是一个源图(source_graph)和一个目标图(target_graph)，均以邻接表(adjacency list)的文本格式表示。你需要找出两个图之间的同构映射关系。

分析给定的源图和目标图。请1) 清晰地解释你找到的节点映射规则。2) 以JSON格式给出从源图节点到目标图节点的完整映射。
正确映射: {'S1': 'T_A', 'S2': 'T_B'}
================================================================================
正在获取模型响应...
提示：模型正在进行图形映射推理，请耐心等待...

响应完成！耗时: 405.62s
成功: True

模型响应:
------------------------------------------------------------
为了回答这个问题，我需要具体的源图(source_graph)和目标图(target_graph)的邻接表表示。请提供这两个图的具体信息，以便我可以帮助你分析它们之间的同构映射关系。

如果你能提供这些信息，我将能够：

1. 分析两个图的结构，包括节点数量、边的数量以及每个节点的连接情况。
2. 确定是否存在一种一对一的节点映射，使得源图在应用这个映射后与目标图完全相同。
3. 提供从源图节点到目标图节点的完整映射规则，并以JSON格式呈现。

请提供源图和目标图的具体邻接表表示，以便我进行分析。
------------------------------------------------------------
响应长度: 252 字符
✗ 答案不匹配正确映射: {'S1': 'T_A', 'S2': 'T_B'}

等待3秒后继续下一题...

================================================================================
问题 2/35: AGENT_GM_2
维度: Pattern Recognition
难度: Easy
源图: {'S1': ['S2'], 'S2': ['S1', 'S3'], 'S3': ['S2']}
目标图: {'T_X': ['T_Y'], 'T_Y': ['T_X', 'T_Z'], 'T_Z': ['T_Y']}
提示: 下面是一个源图(source_graph)和一个目标图(target_graph)，均以邻接表(adjacency list)的文本格式表示。你需要找出两个图之间的同构映射关系。

分析给定的源图和目标图。请1) 清晰地解释你找到的节点映射规则。2) 以JSON格式给出映射。
正确映射: {'S1': 'T_X', 'S2': 'T_Y', 'S3': 'T_Z'}
================================================================================
正在获取模型响应...
提示：模型正在进行图形映射推理，请耐心等待...

响应完成！耗时: 600.06s
成功: False

模型响应:
------------------------------------------------------------
Error: HTTPConnectionPool(host='localhost', port=11434): Read timed out. (read timeout=600)
------------------------------------------------------------
响应长度: 91 字符
✗ 答案不匹配正确映射: {'S1': 'T_X', 'S2': 'T_Y', 'S3': 'T_Z'}

等待3秒后继续下一题...

================================================================================
问题 3/35: AGENT_GM_3
维度: Pattern Recognition
难度: Easy
源图: {'S_A': ['S_B', 'S_C', 'S_D'], 'S_B': ['S_A'], 'S_C': ['S_A'], 'S_D': ['S_A']}
目标图: {'T1': ['T4'], 'T2': ['T4'], 'T3': ['T4'], 'T4': ['T1', 'T2', 'T3']}
提示: 下面是一个源图(source_graph)和一个目标图(target_graph)，均以邻接表(adjacency list)的文本格式表示。你需要找出两个图之间的同构映射关系。

分析给定的源图和目标图。请1) 清晰地解释你找到的节点映射规则。2) 以JSON格式给出映射。
正确映射: {'S_A': 'T4', 'S_B': 'T1', 'S_C': 'T2', 'S_D': 'T3'}
================================================================================
正在获取模型响应...
提示：模型正在进行图形映射推理，请耐心等待...

响应完成！耗时: 391.13s
成功: True

模型响应:
------------------------------------------------------------
为了找出两个图之间的同构映射关系，我们需要比较源图(source_graph)和目标图(target_graph)，并确定一个节点到另一个节点的一对一对应关系，使得在源图中任意两个节点的连接状态与它们在目标图中的对应节点的连接状态一致。

假设我们有以下的源图和目标图：

**源图 (source_graph):**
```
A -> B, C
B -> A, D
C -> A, E
D -> B
E -> C
```

**目标图 (target_graph):**
```
X -> Y, Z
Y -> X, W
Z -> X, V
W -> Y
V -> Z
```

通过分析，我们可以发现：

- 节点A在源图中连接到B和C，节点X在目标图中连接到Y和Z。
- 节点B在源图中连接到A和D，节点Y在目标图中连接到X和W。
- 节点C在源图中连接到A和E，节点Z在目标图中连接到X和V。
- 节点D在源图中只连接到B，节点W在目标图中只连接到Y。
- 节点E在源图中只连接到C，节点V在目标图中只连接到Z。

因此，我们可以得出以下的节点映射规则：

1. A 映射到 X
2. B 映射到 Y
3. C 映射到 Z
4. D 映射到 W
5. E 映射到 V

以JSON格式给出的映射如下：
```json
{
  "A": "X",
  "B": "Y",
  "C": "Z",
  "D": "W",
  "E": "V"
}
```

这个映射确保了源图和目标图之间的同构关系，因为每个节点的连接状态在两个图中都保持一致。
------------------------------------------------------------
响应长度: 673 字符
✗ 答案不匹配正确映射: {'S_A': 'T4', 'S_B': 'T1', 'S_C': 'T2', 'S_D': 'T3'}

等待3秒后继续下一题...

================================================================================
问题 4/35: AGENT_GM_4
维度: Logical Thinking
难度: Easy
源图: {'S1': ['S2', 'S3'], 'S2': ['S1', 'S3'], 'S3': ['S1', 'S2']}
目标图: {'T_A': ['T_B', 'T_C'], 'T_B': ['T_A'], 'T_C': ['T_A']}
提示: 下面是一个源图(source_graph)和一个目标图(target_graph)，均以邻接表(adjacency list)的文本格式表示。你需要找出两个图之间的同构映射关系。

这两个图是同构的吗？请1) 解释你的判断理由。2) 如果是，请提供映射；如果不是，请说明为什么不是。
测试过程中出错: 'correct_mapping'
